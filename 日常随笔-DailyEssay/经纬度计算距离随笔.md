# 如何用两点的经纬度计算距离
## 背景
   公司主要做线路统计管理，有很多点位的经纬度，这些点之间都由线连接，需要计算出指定的一些点，他们中间连线的长度，数据库中存有所有线左右端点的经纬度，所以我只需要搞定点与点间距离的计算，然后把遍历即可
## 大体思路
网上大多是讲要Haversine
[参考博客][0]

首先是由**圆半径**与**两半径夹角角度**求得**圆上两点直线距离**

![一圆中两半径端点相连形成等腰三角形][img1]
 










[0]: https://www.cnblogs.com/softfair/p/distance_of_two_latitude_and_longitude_points.html
[img1]: data:image/jpg;base64,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